---

### **接口名称**:`native.run`

> [danger]请注意,运行的可执行程序分成几类,1.运行本地可执行文件(如本地 exe);2.本地 js 文件,客户端会根据 js 后缀通过`node child_process中的spawn`来运行程序,会新建一个新的`node v8引擎`具体请参照 node 官方文档[点击](https://nodejs.org/api/child_process.html);3.在开放平台上传的可执行程序,由猿之棒进行分发,使用 exe_id 进行自动下载并执行;4.开发的猿之棒 extension,会通过猿之棒分发下载并执行,具体请参照,拓展开发;5.脚本内容

**主要描述**

| 主键          | 值                       |
| ------------- | ------------------------ |
| **接口描述:** | 运行可执行文件的`js`方法 |
| **备注**      | 无                       |

**方法参数示例**

_运行本地可执行文件_

```json
{
 "name":  "run_file", //程序生成的进程名称,重复将不可被执行,不同程序请使用不同名称
 "file":  "/Users/lisa/Documents/workspace/app/natapp", //本地可执行程序绝对路径
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//可执行程序附加的参数
 "env": {}, 注入到可执行程序的环境变量
 "timeout":  10000, //执行超时,超时会自动关闭,不传或则0进程不停止则一直执行
}
```

_运行脚本内容_

```json
{
 "name":  "run_script", //程序生成的进程名称,重复将不可被执行,不同程序请使用不同名称
 "script":  "git --version", //脚本内容
 "env": {}, 注入的环境变量
 "timeout":  10000, //执行超时,超时会自动关闭,不传或则0进程不停止则一直执行
}
```

_使用`exe_id`运行开放平台分发的可执行程序_

```json
{
 "name":  "run_exe_id", //程序生成的进程名称,重复将不可被执行,不同程序请使用不同名称
 "exe_id":  "1", //开放平台上传的可执行程序`id`
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//可执行程序附加的参数
 "env": {}, 注入的环境变量
 "timeout":  10000 //执行超时,超时会自动关闭,不传或则0进程不停止则一直执行
}
```

**方法回调`next`参数示例**

> [danger]进程启动成功立即回调,获取输出数据等,请使用`setCallback`

```json
{}
```

---

### **接口名称**:`native.stop`

**主要描述**

| 主键          | 值                       |
| ------------- | ------------------------ |
| **接口描述:** | 运行可执行文件的`js`方法 |
| **备注**      | 无                       |

**参数验证说明**

| 参数   | 说明                            | 默认值 | 验证规则 |
| ------ | ------------------------------- | ------ | -------- |
| `name` | 对应可执行的名称,不传递停止所有 | 无     | 无       |

**方法参数示例**

```json
{
  "name": "test-setting"
}
```

**方法回调`next`参数示例**

```json
{}
```

---

### **接口名称**:`native.setCallback`

> [danger]该参数中的`next`回调将会在消息触发等操作下一直有效,若一个应用运行多个可执行程序,也会都在该处进行回调.

> [danger]为优化发送消息和接收回调消息,我们提供了[@yuanzhibang/renderer](https://www.npmjs.com/package/@yuanzhibang/renderer)开发组件,提高渲染进程部分进程通信效率,具体请参照,开发组件`readme`和开发`demo`

**主要描述**

| 主键          | 值                                                  |
| ------------- | --------------------------------------------------- |
| **接口描述:** | 设置可执行文件错误,message 输出信息等回调的`js`方法 |
| **备注**      | 无                                                  |

**参数验证说明**

| 参数 | 说明 | 默认值 | 验证规则 |
| ---- | ---- | ------ | -------- |
| `无` | 无   | 无     | 无       |

**方法参数示例**

```json
{}
```

**方法回调`next`参数示例**

```json
{}
```

---

### **接口名称**:`native.getProcessInfo`

**主要描述**

| 主键          | 值                               |
| ------------- | -------------------------------- |
| **接口描述:** | 获取可执行程序进程信息的`js`方法 |
| **备注**      | 无                               |

**参数验证说明**

| 参数 | 说明 | 默认值 | 验证规则 |
| ---- | ---- | ------ | -------- |
| `无` | 无   | 无     | 无       |

**方法参数示例**

```json
{}
```

**方法回调`next`参数示例**

```json
{
  "run_exe_id": { "is_running": true } //一个或者多个,均以exe_name为key,信息为值
}
```

---

### **接口名称**:`native.sendProcessMessage`

> [danger]为优化发送消息和接收回调消息,我们提供了[@yuanzhibang/renderer](https://www.npmjs.com/package/@yuanzhibang/renderer)开发组件,提高渲染进程部分进程通信效率进,具体请参照,开发组件`readme`和开发`demo`

**主要描述**

| 主键          | 值                                 |
| ------------- | ---------------------------------- |
| **接口描述:** | 向可执行程序进程发送消息的`js`方法 |
| **备注**      | 无                                 |

**参数验证说明**

| 参数       | 说明                            | 默认值 | 验证规则 |
| ---------- | ------------------------------- | ------ | -------- |
| `exe_name` | 对应可执行的名称,不传递停止所有 | 无     | 无       |

**方法参数示例**

```json
{
    "exe_name":"test-setting"
    "message": {
        "test": 'test',
        "test1": 'test1',
   }
}

```

**方法回调`next`参数示例**

```json
{}
```

---

### **接口名称**:`native.getNativeInfo`

**主要描述**

| 主键          | 值                         |
| ------------- | -------------------------- |
| **接口描述:** | 获取原生相关信息的`js`方法 |
| **备注**      | 无                         |

**参数验证说明**

| 参数 | 说明 | 默认值 | 验证规则 |
| ---- | ---- | ------ | -------- |
| `无` | 无   | 无     | 无       |

**方法参数示例**

```json
{}
```

**方法回调`next`参数示例**

```json
{
  "app_info": {
    "version": "0.0.396",
    "platform": "win32",
    "container_version": "1.0.0",
    "versions": {
      "node": "16.13.2",
      "v8": "10.0.139.17-electron.0",
      "uv": "1.42.0",
      "zlib": "1.2.11",
      "brotli": "1.0.9",
      "ares": "1.18.1",
      "modules": "103",
      "nghttp2": "1.45.1",
      "napi": "8",
      "llhttp": "6.0.4",
      "openssl": "1.1.1",
      "icu": "70.1",
      "unicode": "14.0",
      "electron": "18.2.4",
      "chrome": "100.0.4896.160"
    }
  },
  "device_info": {
    "cpu_arch": "x64",
    "platform": "win32",
    "os_type": "Windows_NT",
    "os_relese": "10.0.22621"
  }
}
```

---
