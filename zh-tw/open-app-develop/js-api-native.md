---

### `native.run`

!>請注意,運行的可執行程序分成幾類,1.運行本地可執行文件(如本地 exe);2.本地 js 文件,客戶端會根據 js 後綴通過`node child_process中的spawn`來運行程序,會新建一個新的`node v8引擎`具體請參照 node 官方文檔<a href="https://nodejs.org/api/child_process.html" target="_blank">點擊</a>;3.在開放平台上傳的可執行程序,由猿之棒進行分發,使用 exe_id 進行自動下載並執行;4.開發的猿之棒 extension,會通過猿之棒分發下載並執行,具體請參照,拓展開發;5.腳本內容

**主要描述**

| 主鍵          | 值                       |
| ------------- | ------------------------ |
| **接口描述:** | 運行可執行文件的`js`方法 |
| **備註**      | 無                       |

**方法參數示例**

_運行本地可執行文件_

```json
{
 "name":  "run_file", //程序生成的進程名稱,重複將不可被執行,不同程序請使用不同名稱
 "file":  "/Users/lisa/Documents/workspace/app/natapp", //本地可執行程序絕對路徑
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//可執行程序附加的參數
 "env": {}, 注入到可執行程序的環境變量
 "timeout":  10000, //執行超時,超時會自動關閉,不傳或則0進程不停止則一直執行
}
```

_運行腳本內容_

```json
{
 "name":  "run_script", //程序生成的進程名稱,重複將不可被執行,不同程序請使用不同名稱
 "script":  "git --version", //腳本內容
 "env": {}, 注入的環境變量
 "timeout":  10000, //執行超時,超時會自動關閉,不傳或則0進程不停止則一直執行
}
```

_使用`exe_id`運行開放平台分發的可執行程序_

```json
{
 "name":  "run_exe_id", //程序生成的進程名稱,重複將不可被執行,不同程序請使用不同名稱
 "exe_id":  "1", //開放平台上傳的可執行程序`id`
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//可執行程序附加的參數
 "env": {}, 注入的環境變量
 "timeout":  10000 //執行超時,超時會自動關閉,不傳或則0進程不停止則一直執行
}
```

**方法回調`next`參數示例**

!>進程啟動成功立即回調,獲取輸出數據等,請使用`setCallback`

```json
{}
```

---

### `native.stop`

**主要描述**

| 主鍵          | 值                       |
| ------------- | ------------------------ |
| **接口描述:** | 運行可執行文件的`js`方法 |
| **備註**      | 無                       |

**參數驗證說明**

| 參數   | 說明                            | 默認值 | 驗證規則 |
| ------ | ------------------------------- | ------ | -------- |
| `name` | 對應可執行的名稱,不傳遞停止所有 | 無     | 無       |

**方法參數示例**

```json
{
  "name": "test-setting"
}
```

**方法回調`next`參數示例**

```json
{}
```

---

### `native.setCallback`

!>該參數中的`next`回調將會在消息觸發等操作下一直有效,若一個應用運行多個可執行程序,也會都在該處進行回調.

!>為優化發送消息和接收回調消息,我們提供了<a href="https://www.npmjs.com/package/@yuanzhibang/renderer" target="_blank">@yuanzhibang/renderer</a>開發組件,提高渲染進程部分進程通信效率,具體請參照,開發組件`readme`和開發`demo`

**主要描述**

| 主鍵          | 值                                                  |
| ------------- | --------------------------------------------------- |
| **接口描述:** | 設置可執行文件錯誤,message 輸出信息等回調的`js`方法 |
| **備註**      | 無                                                  |

**參數驗證說明**

| 參數 | 說明 | 默認值 | 驗證規則 |
| ---- | ---- | ------ | -------- |
| `無` | 無   | 無     | 無       |

**方法參數示例**

```json
{}
```

**方法回調`next`參數示例**

```json
{}
```

---

### `native.getProcessInfo`

**主要描述**

| 主鍵          | 值                               |
| ------------- | -------------------------------- |
| **接口描述:** | 獲取可執行程序進程信息的`js`方法 |
| **備註**      | 無                               |

**參數驗證說明**

| 參數 | 說明 | 默認值 | 驗證規則 |
| ---- | ---- | ------ | -------- |
| `無` | 無   | 無     | 無       |

**方法參數示例**

```json
{}
```

**方法回調`next`參數示例**

```json
{
  "run_exe_id": { "is_running": true } //一個或者多個,均以exe_name為key,信息為值
}
```

---

### `native.sendProcessMessage`

!>為優化發送消息和接收回調消息,我們提供了<a href="https://www.npmjs.com/package/@yuanzhibang/renderer" target="_blank">@yuanzhibang/renderer</a>開發組件,提高渲染進程部分進程通信效率進,具體請參照,開發組件`readme`和開發`demo`

**主要描述**

| 主鍵          | 值                                 |
| ------------- | ---------------------------------- |
| **接口描述:** | 向可執行程序進程發送消息的`js`方法 |
| **備註**      | 無                                 |

**參數驗證說明**

| 參數       | 說明                            | 默認值 | 驗證規則 |
| ---------- | ------------------------------- | ------ | -------- |
| `exe_name` | 對應可執行的名稱,不傳遞停止所有 | 無     | 無       |

**方法參數示例**

```json
{
    "exe_name":"test-setting"
    "message": {
        "test": 'test',
        "test1": 'test1',
   }
}

```

**方法回調`next`參數示例**

```json
{}
```

---

### `native.getNativeInfo`

**主要描述**

| 主鍵          | 值                         |
| ------------- | -------------------------- |
| **接口描述:** | 獲取原生相關信息的`js`方法 |
| **備註**      | 無                         |

**參數驗證說明**

| 參數 | 說明 | 默認值 | 驗證規則 |
| ---- | ---- | ------ | -------- |
| `無` | 無   | 無     | 無       |

**方法參數示例**

```json
{}
```

**方法回調`next`參數示例**

```json
{
  "app_info": {
    "version": "0.0.396",
    "platform": "win32",
    "container_version": "1.0.0",
    "versions": {
      "node": "16.13.2",
      "v8": "10.0.139.17-electron.0",
      "uv": "1.42.0",
      "zlib": "1.2.11",
      "brotli": "1.0.9",
      "ares": "1.18.1",
      "modules": "103",
      "nghttp2": "1.45.1",
      "napi": "8",
      "llhttp": "6.0.4",
      "openssl": "1.1.1",
      "icu": "70.1",
      "unicode": "14.0",
      "electron": "18.2.4",
      "chrome": "100.0.4896.160"
    }
  },
  "device_info": {
    "cpu_arch": "x64",
    "platform": "win32",
    "os_type": "Windows_NT",
    "os_relese": "10.0.22621"
  }
}
```

---
