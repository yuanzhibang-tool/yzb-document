---

### `native.run`

!> Please note that the executable programs to run are divided into several categories, 1. Running local executable files (such as local exe); 2. Local js files, the client will run the program through spawn in `node child_process` according to the js suffix , a new `node v8 engine` will be created for details, please refer to the official node documentation <a href="https://nodejs.org/api/child_process.html" target="_blank">Click</a>;3. Executable programs uploaded on the open platform are distributed by Ape's Stick, and automatically downloaded and executed using exe_id; 4. The developed Ape's Stick extension will be downloaded and executed through Ape's Stick distribution. For details, please refer to Expansion Development; 5. Script content

**Main Description**

| primary key | value |
| ------------- | ------------------------ |
| **Interface description:** | `js` method to run executable |
| **Remarks** | None |

**Method parameter example**

_Run a local executable_

````json
{
 "name": "run_file", //The name of the process generated by the program, duplicates will not be executed, please use different names for different programs
 "file": "/Users/lisa/Documents/workspace/app/natapp", //absolute path of local executable program
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//The additional parameters of the executable program
 "env": {}, environment variables injected into the executable
 "timeout": 10000, //Execution timeout, the timeout will be automatically closed, if it is not passed or 0 process does not stop, it will continue to execute
}
````

_Run script content_

````json
{
 "name": "run_script", //The name of the process generated by the program, duplicates will not be executed, please use different names for different programs
 "script": "git --version", //script content
 "env": {}, the injected environment variable
 "timeout": 10000, //Execution timeout, the timeout will be automatically closed, if it is not passed or 0 process does not stop, it will continue to execute
}
````

_Use `exe_id` to run executable programs distributed by the open platform_

````json
{
 "name": "run_exe_id", //The name of the process generated by the program, duplicates will not be executed, please use different names for different programs
 "exe_id": "1", //The executable program uploaded by the open platform `id`
 "args": ["-server=2.2.2.2:8024", "-vkey=lisa123"],//The additional parameters of the executable program
 "env": {}, the injected environment variable
 "timeout": 10000 //Execution timeout, the timeout will be automatically closed, if it is not passed or 0 process does not stop, it will continue to execute
}
````

**Method callback `next` parameter example**

!> Call back immediately after the process starts successfully, get output data, etc., please use `setCallback`

````json
{}
````

---

### `native.stop`

**Main Description**

| primary key                | value                         |
| -------------------------- | ----------------------------- |
| **Interface description:** | `js` method to run executable |
| **Remarks**                | None                          |

**Parameter verification instructions**

| Parameters | Description                                         | Default | Validation Rules |
| ---------- | --------------------------------------------------- | ------- | ---------------- |
| `name`     | Corresponding executable name, do not pass stop all | none    | none             |

**Method parameter example**

```json
{
  "name": "test-setting"
}
```

**Method callback `next` parameter example**

```json
{}
```

---

### `native.setCallback`

!> The `next` callback in this parameter will always be valid under operations such as message triggering. If an application runs multiple executable programs, they will all be called back there.

!>To optimize sending messages and receiving callback messages, we provide <a href="https://www.npmjs.com/package/@yuanzhibang/renderer" target="_blank">@yuanzhibang/renderer</a> Develop components to improve the communication efficiency of some processes in the rendering process. For details, please refer to Develop Component `readme` and Develop `demo`

**Main Description**

| primary key                | value                                                                                       |
| -------------------------- | ------------------------------------------------------------------------------------------- |
| **Interface description:** | Set the `js` method of callback for executable file error, message output information, etc. |
| **Remarks**                | None                                                                                        |

**Parameter verification instructions**

| Parameters | Description | Default | Validation Rules |
| ---------- | ----------- | ------- | ---------------- |
| `none`     | none        | none    | none             |

**Method parameter example**

```json
{}
```

**Method callback `next` parameter example**

```json
{}
```

---

### `native.getProcessInfo`

**Main Description**

| primary key                | value                                                                    |
| -------------------------- | ------------------------------------------------------------------------ |
| **Interface description:** | The `js` method to get the process information of the executable program |
| **Remarks**                | None                                                                     |

**Parameter verification instructions**

| Parameters | Description | Default | Validation Rules |
| ---------- | ----------- | ------- | ---------------- |
| `none`     | none        | none    | none             |

**Method parameter example**

```json
{}
```

**Method callback `next` parameter example**

```json
{
  "run_exe_id": { "is_running": true } //One or more, all use exe_name as key and information as value
}
```

---

### `native.sendProcessMessage`

!>To optimize sending messages and receiving callback messages, we provide <a href="https://www.npmjs.com/package/@yuanzhibang/renderer" target="_blank">@yuanzhibang/renderer</a> Develop components to improve the communication efficiency of some processes in the rendering process. For details, please refer to developing components `readme` and developing `demo`

**Main Description**

| primary key                | value                                                          |
| -------------------------- | -------------------------------------------------------------- |
| **Interface description:** | The `js` method for sending messages to the executable process |
| **Remarks**                | None                                                           |

**Parameter verification instructions**

| Parameters | Description                                                     | Default | Validation Rules |
| ---------- | --------------------------------------------------------------- | ------- | ---------------- |
| `exe_name` | corresponds to the name of the executable, do not pass stop all | none    | none             |

**Method parameter example**

```json
{
    "exe_name":"test-setting"
 "message": {
        "test": 'test',
        "test1": 'test1',
 } }
}

```

**Method callback `next` parameter example**

```json
{}
```

---

### `native.getNativeInfo`

**Main Description**

| primary key                | value                                         |
| -------------------------- | --------------------------------------------- |
| **Interface description:** | `js` method to get native related information |
| **Remarks**                | None                                          |

**Parameter verification instructions**

| Parameters | Description | Default | Validation Rules |
| ---------- | ----------- | ------- | ---------------- |
| `none`     | none        | none    | none             |

**Method parameter example**

```json
{}
```

**Method callback `next` parameter example**

```json
{
  "app_info": {
    "version": "0.0.396",
    "platform": "win32",
    "container_version": "1.0.0",
    "versions": {
      "node": "16.13.2",
      "v8": "10.0.139.17-electron.0",
      "uv": "1.42.0",
      "zlib": "1.2.11",
      "brotli": "1.0.9",
      "ares": "1.18.1",
      "modules": "103",
      "nghttp2": "1.45.1",
      "napi": "8",
      "llhttp": "6.0.4",
      "openssl": "1.1.1",
      "icu": "70.1",
      "unicode": "14.0",
      "electron": "18.2.4",
      "chrome": "100.0.4896.160"
    }
  },
  "device_info": {
    "cpu_arch": "x64",
    "platform": "win32",
    "os_type": "Windows_NT",
    "os_relese": "10.0.22621"
  }
}
```

---
